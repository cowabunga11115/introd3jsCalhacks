<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 Test</title>
        <script type="text/javascript" src="d3/d3.v3.js"></script>
        <script src="fiction.js"></script>
        <script src="data.js"></script>
    </head>
    <body>
        <h1 align="center">D3.js with real-world data!</h1>
            
        <script type="text/javascript">//why it's in body

            var w = 800,
                h = 600;

            canvas = d3.select("body")
              .append("svg")
              .attr("width",w)
              .attr("height",h);

            var axisW = 4*150,
                axisH = 4*120;

            var xAxisScale = d3.scale.linear()
                                    .domain([0,4])
                                    .range([0,axisW]);
                                    
            var xAxis = d3.svg.axis()
                              .scale(xAxisScale)
                              .ticks(4);

            var xAxisGroup = canvas.append("g")
                              .call(xAxis);

            canvas.append("text")
                  .attr("x",axisW+20)
                  .attr("y",20)
                  .text("Money");
            
            canvas.append("text")
                  .attr("x",0)
                  .attr("y",axisH+20)
                  .text("Look");
            
            var yAxisScale = d3.scale.linear()
                                    .domain([0,4])
                                    .range([0,axisH]);
                                    

            var yAxis = d3.svg.axis()
                              .scale(yAxisScale)
                              .orient("right")
                              .ticks(4);

            var xAxisGroup = canvas.append("g")
                              .call(yAxis);
                              // .call(yAxis);

            // circles = canvas.selectAll("circle")
            //       .data(data)  
            //       .enter()
            //       .append("circle");
            
            // circles.attr("cx", function(d){
            //         return d.Money*150;
            //       })
            //        .attr("cy", function(d){
            //         return d.Looks*120;
            //       })
            //       .attr("r", function(d){
            //         return d.Grades*10;
            //        })
            //       .attr("fill", function(d){
            //         return "rgba("+d.Grades*50+","+0+","+100+",0.1)";
            //       });
            // circles.attr("cx", 10)     
            //       .attr("cy", 10)
            //       .attr("r", 10)
            //       .attr("fill", function(d){
            //         return "rgb(0,0,0)";
            //       })
            //       .attr("opacity",0.1);
            
            // circles.transition()
            //       .duration(1000)
            //       .attr("cx", function(d){
            //         return d.Money*150;
            //       })
            //       .transition()
            //       .duration(1000)
            //       .attr("cy", function(d){
            //         return d.Looks*120;
            //       })
            //       .transition()
            //       .duration(1000)
            //       .attr("r", function(d){
            //         return d.Grades*10;
            //       })
            //       .attr("fill", function(d){
            //         return "rgb("+d.Grades*50+","+0+","+100+")";
            //       });

              var nodes = d3.range(data.length)
                            .map(function(i) {return {x:data[i].Money*150, 
                                                      y:data[i].Looks*120, 
                                                      radius: data[i].Grades*10, 
                                                      color: "rgb("+data[i].Grades*50+","+0+","+100+")" 
                                                     }});

                            var force = d3.layout.force()
                              .gravity(0)
                              .charge(function(d, i) { return -0.8})
                              .nodes(nodes)
                              .size([w, h])
                              .friction(0.3);

                force.start();

                circles = canvas.selectAll("circle")
                    .data(nodes)
                    .enter().append("circle")
                    .attr("r", function(d) { return d.radius; })
                    .style("fill", function(d, i) { return d.color; })
                    .attr("opacity", 0.3);                
                
                force.on("tick", function(e) {
                    canvas.selectAll("circle")
                        .attr("cx", function(d) { return d.x; })
                        .attr("cy", function(d) { return d.y; });
                });
                

                
            
        </script>

    </body>
</html>     